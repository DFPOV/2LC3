â€” Homework 13: Abstract Relation Algebra: More Union Material
[1]
Here we bring converse Ë˜ together with binary union âˆª, for which distributivity of composition is already assumed.

Preloaded here are propositional and predicate logic, and abstract relation-algebraic material from Ref9.2, Ref9.3, Ref9.4, and Ref9.5.

(No set theory, and no relationship _â¦—_â¦˜_ are available here!)

[2]
The first two theorems here are dual versions of theorems in Ex9.5 (and Ref9.4); â€œCharacterisation of âˆªâ€ from Ref9.5 will be useful to get started:

[3]
Theorem â€œUnion of conversesâ€:    R Ë˜ âˆª S Ë˜  âŠ†  (R âˆª S) Ë˜
Proof:
    R Ë˜ âˆª S Ë˜ âŠ† (R âˆª S) Ë˜
  â‰¡âŸ¨ â€œCharacterisation of âˆªâ€âŸ©
    R Ë˜ âŠ† (R âˆª S) Ë˜ âˆ§ S Ë˜ âŠ† (R âˆª S) Ë˜
  â‰¡âŸ¨ â€œIsotonicity of Ë˜â€âŸ©
    R Ë˜ Ë˜ âŠ† (R âˆª S) Ë˜ Ë˜ âˆ§ S Ë˜ Ë˜ âŠ† (R âˆª S) Ë˜ Ë˜
  â‰¡âŸ¨ â€œSelf-inverse of Ë˜â€, â€œWeakening for âˆªâ€âŸ©  
    true

Theorem â€œWeakâ€:
    R âŠ† R âˆª S
Proof:
    R âŠ† R âˆª S
  â‰¡âŸ¨ â€œWeakening for âˆªâ€âŸ©
    true 

Theorem â€œUnion of conversesâ€: R Ë˜ âˆª S Ë˜ âŠ† (R âˆª S) Ë˜
Proof:
    Calculation for expected goal  `R Ë˜ âˆª S Ë˜ âŠ† (R âˆª S) Ë˜`:
            R Ë˜ âˆª S Ë˜ âŠ† (R âˆª S) Ë˜
        â‰¡ âŸ¨ â€œCharacterisation of âˆªâ€ âŸ©
                â€” CalcCheck: Found â€œCharacterisation of âˆªâ€
                â€” CalcCheck: â”€ OK
            R Ë˜ âŠ† (R âˆª S) Ë˜ âˆ§ S Ë˜ âŠ† (R âˆª S) Ë˜
        â‰¡ âŸ¨ â€œIsotonicity of Ë˜â€ âŸ©
                â€” CalcCheck: Found â€œIsotonicity of Ë˜â€
                â€” CalcCheck: â”€ OK
            (R Ë˜) Ë˜ âŠ† ((R âˆª S) Ë˜) Ë˜ âˆ§ (S Ë˜) Ë˜ âŠ† ((R âˆª S) Ë˜) Ë˜
        â‰¡ âŸ¨ â€œSelf-inverse of Ë˜â€, â€œWeakening for âˆªâ€ âŸ©
                â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                â€” CalcCheck: Found â€œWeakening for âˆªâ€
                â€” CalcCheck: â”€ OK
            true    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
Theorem â€œWeakâ€: R âŠ† R âˆª S
Proof:
    Calculation for expected goal  `R âŠ† R âˆª S`:
            R âŠ† R âˆª S
        â‰¡ âŸ¨ â€œWeakening for âˆªâ€ âŸ©
                â€” CalcCheck: Found â€œWeakening for âˆªâ€
                â€” CalcCheck: â”€ OK
            true    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[4]
Theorem â€œConverse of âˆªâ€:     (R âˆª S) Ë˜  =  R Ë˜ âˆª S Ë˜
Proof:
  Using â€œMutual inclusionâ€:
      Subproof for ` R Ë˜ âˆª S Ë˜  âŠ†  (R âˆª S) Ë˜`:
          By â€œUnion of conversesâ€

      Subproof for ` (R âˆª S) Ë˜ âŠ† R Ë˜ âˆª S Ë˜`:
          (R âˆª S) Ë˜ âŠ† R Ë˜ âˆª S Ë˜
        â‰¡âŸ¨ â€œIsotonicity of Ë˜â€, â€œSelf-inverse of Ë˜â€âŸ© 
          R âˆª S âŠ† (R Ë˜ âˆª S Ë˜) Ë˜
        â‰¡âŸ¨ â€œCharacterisation of âˆªâ€âŸ©
          R âŠ† (R Ë˜ âˆª S Ë˜) Ë˜ âˆ§ S âŠ† (R Ë˜ âˆª S Ë˜) Ë˜
        â‰¡âŸ¨ â€œIsotonicity of Ë˜â€, â€œSelf-inverse of Ë˜â€âŸ© 
          R Ë˜ âŠ† (R Ë˜ âˆª S Ë˜) âˆ§ S Ë˜ âŠ† (R Ë˜ âˆª S Ë˜)
        â‰¡âŸ¨ â€œWeakening for âˆªâ€âŸ© 
          true

Theorem â€œConverse of âˆªâ€: (R âˆª S) Ë˜ = R Ë˜ âˆª S Ë˜
Proof:
    Using â€œMutual inclusionâ€:       
        â€” CalcCheck: Found â€œMutual inclusionâ€
        Subproof for `R Ë˜ âˆª S Ë˜ âŠ† (R âˆª S) Ë˜`:
            By â€œUnion of conversesâ€               
                â€” CalcCheck: Found â€œUnion of conversesâ€
        Subproof for `(R âˆª S) Ë˜ âŠ† R Ë˜ âˆª S Ë˜`:
                    (R âˆª S) Ë˜ âŠ† R Ë˜ âˆª S Ë˜
                â‰¡ âŸ¨ â€œIsotonicity of Ë˜â€, â€œSelf-inverse of Ë˜â€ âŸ©
                        â€” CalcCheck: Found â€œIsotonicity of Ë˜â€
                        â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                        â€” CalcCheck: â”€ OK
                    R âˆª S âŠ† (R Ë˜ âˆª S Ë˜) Ë˜
                â‰¡ âŸ¨ â€œCharacterisation of âˆªâ€ âŸ©
                        â€” CalcCheck: Found â€œCharacterisation of âˆªâ€
                        â€” CalcCheck: â”€ OK
                    R âŠ† (R Ë˜ âˆª S Ë˜) Ë˜ âˆ§ S âŠ† (R Ë˜ âˆª S Ë˜) Ë˜
                â‰¡ âŸ¨ â€œIsotonicity of Ë˜â€, â€œSelf-inverse of Ë˜â€ âŸ©
                        â€” CalcCheck: Found â€œIsotonicity of Ë˜â€
                        â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                        â€” CalcCheck: â”€ OK
                    R Ë˜ âŠ† R Ë˜ âˆª S Ë˜ âˆ§ S Ë˜ âŠ† R Ë˜ âˆª S Ë˜
                â‰¡ âŸ¨ â€œWeakening for âˆªâ€ âŸ©
                        â€” CalcCheck: Found â€œWeakening for âˆªâ€
                        â€” CalcCheck: â”€ OK
                    true            
            â€” CalcCheck: All steps OK           
            â€” CalcCheck: Calculation matches goal â”€ OK
[5]
The theorem â€œConverse dummy in âˆ€â€ is a special case of theorem (8.22) â€œChange of dummyâ€ in LADM â€” the proof on p. 151 in LADM can be followed essentially step by step to obtain a proof of this instance:

[6]
Theorem â€œConverse dummy in âˆ€â€:
    (âˆ€ X â™ R â€¢ P) â‰¡ (âˆ€ Y â™ R[X â‰” Y Ë˜] â€¢ P[X â‰” Y Ë˜])
Proof:
      (âˆ€ Y â™ R[X â‰” Y Ë˜] â€¢ P[X â‰” Y Ë˜])
    â‰¡âŸ¨ â€œOne-point rule for âˆ€â€ âŸ©
      âˆ€ Y â™ R [X â‰” Y Ë˜] â€¢ (âˆ€ X â™ X = Y Ë˜ â€¢ P)
    â‰¡âŸ¨ â€œNesting for âˆ€â€, â€œDummy list permutation for âˆ€â€âŸ©
      âˆ€ X, Y â™ R [X â‰” Y Ë˜] âˆ§ X = Y Ë˜ â€¢ P 
    â‰¡âŸ¨ â€œReplacementâ€âŸ©
      âˆ€ X, Y â™ R [X â‰” X] âˆ§ X = Y Ë˜ â€¢ P
    â‰¡âŸ¨ Substitution âŸ©
      âˆ€ X, Y â™ R âˆ§ X = Y Ë˜ â€¢ P 
    â‰¡âŸ¨ â€œNesting for âˆ€â€âŸ©
      âˆ€ X â™ R â€¢ (âˆ€ Y â™ X = Y Ë˜ â€¢ P)
    â‰¡âŸ¨ â€œSelf-inverse of Ë˜â€, â€œCancellation of Ë˜â€, â€œReflexivity of =â€âŸ©
      âˆ€ X â™ R â€¢ (âˆ€ Y â™ Y = X Ë˜ â€¢ P)
    â‰¡âŸ¨ â€œOne-point rule for âˆ€â€âŸ©
      âˆ€ X â™ R â€¢ P[Y â‰” X Ë˜] 
    â‰¡âŸ¨ Substitution âŸ©
      âˆ€ X â™ R â€¢ P 
    

Theorem â€œConverse dummy in âˆ€â€: (âˆ€ X â™ R â€¢ P ) â‰¡ (âˆ€ Y â™ R[X â‰” Y Ë˜] â€¢ P[X â‰” Y Ë˜] )   
    â€” CalcCheck: Proviso: Â¬occurs(`Y`, `P, R`)
Proof:
    Calculation for expected goal  `(âˆ€ X â™ R â€¢ P ) â‰¡ (âˆ€ Y â™ R[X â‰” Y Ë˜] â€¢ P[X â‰” Y Ë˜] )`:
            (âˆ€ Y â™ R[X â‰” Y Ë˜] â€¢ P[X â‰” Y Ë˜] )
        â‰¡ âŸ¨ â€œOne-point rule for âˆ€â€ âŸ©
                â€” CalcCheck: Found (8.14) â€œOne-point rule for âˆ€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ Y â™ R[X â‰” Y Ë˜] â€¢ (âˆ€ X â™ X = Y Ë˜ â€¢ P ) )
        â‰¡ âŸ¨ â€œNesting for âˆ€â€, â€œDummy list permutation for âˆ€â€ âŸ©
                â€” CalcCheck: Found (8.20.2) â€œNesting for âˆ€â€, (8.20.1) â€œNesting for âˆ€â€, (8.20) â€œNesting for âˆ€â€
                â€” CalcCheck: Found (8.19.1) â€œDummy list permutation for âˆ€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ X, Y â™ R[X â‰” Y Ë˜] âˆ§ X = Y Ë˜ â€¢ P )
        â‰¡ âŸ¨ â€œReplacementâ€ âŸ©
                â€” CalcCheck: Found (3.84b) â€œReplacementâ€, (3.84a) â€œReplacementâ€, (3.84c) â€œReplacementâ€, (3.51) â€œReplacementâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ X, Y â™ R[X â‰” X] âˆ§ X = Y Ë˜ â€¢ P )
        â‰¡ âŸ¨ Substitution âŸ©
                â€” CalcCheck: â”€ OK
            (âˆ€ X, Y â™ R âˆ§ X = Y Ë˜ â€¢ P )
        â‰¡ âŸ¨ â€œNesting for âˆ€â€ âŸ©
                â€” CalcCheck: Found (8.20.2) â€œNesting for âˆ€â€, (8.20.1) â€œNesting for âˆ€â€, (8.20) â€œNesting for âˆ€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ R â€¢ (âˆ€ Y â™ X = Y Ë˜ â€¢ P ) )
        â‰¡ âŸ¨ â€œSelf-inverse of Ë˜â€, â€œCancellation of Ë˜â€, â€œReflexivity of =â€ âŸ©
                â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                â€” CalcCheck: Found â€œCancellation of Ë˜â€
                â€” CalcCheck: Found (1.2) â€œReflexivity of =â€
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ R â€¢ (âˆ€ Y â™ Y = X Ë˜ â€¢ P ) )
        â‰¡ âŸ¨ â€œOne-point rule for âˆ€â€ âŸ©
                â€” CalcCheck: Found (8.14) â€œOne-point rule for âˆ€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ R â€¢ P[Y â‰” X Ë˜] )
        â‰¡ âŸ¨ Substitution âŸ©
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ R â€¢ P )    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[7]
Difference of Relations
[8]
In the current context, we are not assuming a least relation (such as {} in set theory), so we resort to a somewhat convoluted characterisation of relation difference:

[9]
Declaration: _-_ : A â†” B â†’ A â†” B â†’ A â†” B
Axiom â€œCharacterisation of -â€: X âŠ† R - S  â‰¡  X âŠ† R  âˆ§
  âˆ€ Y â™ Y âŠ† S â€¢  X âˆ© S âŠ† Y

Declaration: _-_ : A â†” B â†’ (A â†” B â†’ A â†” B)   
    â€” CalcCheck: Operator _-_: Associating to the left; precedence 100
Axiom â€œCharacterisation of -â€: X âŠ† R - S â‰¡ X âŠ† R âˆ§ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y )   
    â€” CalcCheck: Proviso: Â¬occurs(`Y`, `S, X`)
[10]
Axiom â€œCancellation of - with âˆªâ€: S âŠ† T âˆª (S - T)

Axiom â€œCancellation of - with âˆªâ€: S âŠ† T âˆª (S - T)
[11]
Theorem â€œDifference âŠ†â€: R - S âŠ† R
Proof:
      R - S âŠ† R
    â‰¡âŸ¨ â€œIndirect Relation Inclusionâ€âŸ© 
      âˆ€ X â€¢ X âŠ† R - S â‡’ X âŠ† R
    â‰¡âŸ¨ â€œTrading for âˆ€â€âŸ© 
      âˆ€ X â™ X âŠ† R - S â€¢ X âŠ† R
    â‰¡âŸ¨ â€œCharacterisation of -â€âŸ©
      âˆ€ X â™ (X âŠ† R âˆ§ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y)) â€¢ X âŠ† R
    â‰¡âŸ¨ â€œSymmetry of âˆ§â€âŸ©
      âˆ€ X â™ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y) âˆ§ X âŠ† R â€¢ X âŠ† R
    â‰¡âŸ¨ â€œTrading for âˆ€â€âŸ©
      âˆ€ X â™ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y) â€¢ X âŠ† R â‡’ X âŠ† R
    â‰¡âŸ¨ â€œReflexivity of â‡’â€âŸ©
      âˆ€ X â™ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y) â€¢ true
    â‰¡âŸ¨ â€œTrue âˆ€ bodyâ€âŸ©
      true 

Theorem â€œDifference âŠ†â€: R - S âŠ† R
Proof:
    Calculation for expected goal  `R - S âŠ† R`:
            R - S âŠ† R
        â‰¡ âŸ¨ â€œIndirect Relation Inclusionâ€ âŸ©
                â€” CalcCheck: Found â€œIndirect Relation Inclusionâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ X â€¢ X âŠ† R - S â‡’ X âŠ† R )
        â‰¡ âŸ¨ â€œTrading for âˆ€â€ âŸ©
                â€” CalcCheck: Found (9.3a) â€œTrading for âˆ€â€, (9.3b) â€œTrading for âˆ€â€, (9.3c) â€œTrading for âˆ€â€, (9.4a) â€œTrading for âˆ€â€, (9.4b) â€œTrading for âˆ€â€, (9.4c) â€œTrading for âˆ€â€, (9.4d) â€œTrading for âˆ€â€, (9.2) â€œTrading for âˆ€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ X âŠ† R - S â€¢ X âŠ† R )
        â‰¡ âŸ¨ â€œCharacterisation of -â€ âŸ©
                â€” CalcCheck: Found â€œCharacterisation of -â€
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ X âŠ† R âˆ§ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y ) â€¢ X âŠ† R )
        â‰¡ âŸ¨ â€œSymmetry of âˆ§â€ âŸ©
                â€” CalcCheck: Found (3.36) â€œSymmetry of âˆ§â€
                â€” CalcCheck: OK (no change)
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y ) âˆ§ X âŠ† R â€¢ X âŠ† R )
        â‰¡ âŸ¨ â€œTrading for âˆ€â€ âŸ©
                â€” CalcCheck: Found (9.3a) â€œTrading for âˆ€â€, (9.3b) â€œTrading for âˆ€â€, (9.3c) â€œTrading for âˆ€â€, (9.4a) â€œTrading for âˆ€â€, (9.4b) â€œTrading for âˆ€â€, (9.4c) â€œTrading for âˆ€â€, (9.4d) â€œTrading for âˆ€â€, (9.2) â€œTrading for âˆ€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y ) â€¢ X âŠ† R â‡’ X âŠ† R )
        â‰¡ âŸ¨ â€œReflexivity of â‡’â€ âŸ©
                â€” CalcCheck: Found (3.80.1) â€œReflexivity of â‡’ wrt. â‰¡â€, (3.71) â€œReflexivity of â‡’â€
                â€” CalcCheck: â”€ OK
            (âˆ€ X â™ (âˆ€ Y â™ Y âŠ† S â€¢ X âˆ© S âŠ† Y ) â€¢ true )
        â‰¡ âŸ¨ â€œTrue âˆ€ bodyâ€ âŸ©
                â€” CalcCheck: Found (9.8) â€œTrue âˆ€ bodyâ€
                â€” CalcCheck: â”€ OK
            true    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[12]
Theorem â€œDifference in âˆªâ€:
   T âŠ† R  â‡’  R âˆª (S - T) = R âˆª S
Proof:
  Assuming `T âŠ† R`:
    Using â€œMutual inclusionâ€:
      Subproof for `R âˆª (S - T) âŠ† R âˆª S`:
          R âˆª (S - T)
        âŠ†âŸ¨ â€œMonotonicity of âˆªâ€ with â€œDifference âŠ†â€âŸ©
          R âˆª S
      Subproof for `R âˆª S âŠ† R âˆª (S - T)`:
          R âˆª S
        âŠ†âŸ¨ â€œMonotonicity of âˆªâ€ with â€œCancellation of - with âˆªâ€âŸ©
          R âˆª (T âˆª (S - T))
        =âŸ¨ â€œSymmetry of âˆªâ€âŸ©
          (T âˆª R) âˆª (S - T)
        =âŸ¨ â€œInclusion via âˆªâ€ with Assumption `T âŠ† R`âŸ©
          R âˆª (S - T)
          
        

Theorem â€œDifference in âˆªâ€: T âŠ† R â‡’ R âˆª (S - T) = R âˆª S
Proof:
    Assuming `T âŠ† R`:
    â€” CalcCheck: Assumption matches goal
        Using â€œMutual inclusionâ€:           
            â€” CalcCheck: Found â€œMutual inclusionâ€
            Subproof for `R âˆª (S - T) âŠ† R âˆª S`:
                        R âˆª (S - T)
                    âŠ† âŸ¨ â€œMonotonicity of âˆªâ€ with â€œDifference âŠ†â€ âŸ©
                            â€” CalcCheck: Found â€œMonotonicity of âˆªâ€
                            â€” CalcCheck: Found â€œDifference âŠ†â€
                            â€” CalcCheck: â”€ OK
                        R âˆª S                
                â€” CalcCheck: All steps OK               
                â€” CalcCheck: Calculation matches goal â”€ OK
            Subproof for `R âˆª S âŠ† R âˆª (S - T)`:
                        R âˆª S
                    âŠ† âŸ¨ â€œMonotonicity of âˆªâ€ with â€œCancellation of - with âˆªâ€ âŸ©
                            â€” CalcCheck: Found â€œMonotonicity of âˆªâ€
                            â€” CalcCheck: Found â€œCancellation of - with âˆªâ€
                            â€” CalcCheck: â”€ OK
                        R âˆª (T âˆª (S - T))
                    = âŸ¨ â€œSymmetry of âˆªâ€ âŸ©
                            â€” CalcCheck: Found â€œSymmetry of âˆªâ€
                            â€” CalcCheck: OK (no change)
                            â€” CalcCheck: â”€ OK
                        (T âˆª R) âˆª (S - T)
                    = âŸ¨ â€œInclusion via âˆªâ€ with Assumption `T âŠ† R` âŸ©
                            â€” CalcCheck: Found â€œInclusion via âˆªâ€
                            â€” CalcCheck: Found assumption `T âŠ† R`
                            â€” CalcCheck: â”€ OK
                        R âˆª (S - T)                
                â€” CalcCheck: All steps OK               
                â€” CalcCheck: Calculation matches goal â”€ OK
[13]
Theorem â€œConverse of -â€: (R - S) Ë˜ = R Ë˜ - S Ë˜
Proof:
  Using â€œIndirect Relation Equalityâ€:
    For any `X`:
        X âŠ† R Ë˜ - S Ë˜ 
      â‰¡âŸ¨ â€œCharacterisation of -â€âŸ©
        X âŠ† R Ë˜ âˆ§ âˆ€ Y â™ Y âŠ† S Ë˜ â€¢ X âˆ© S Ë˜ âŠ† Y
      â‰¡âŸ¨ â€œConverse dummy in âˆ€â€âŸ©
        X âŠ† R Ë˜ âˆ§ (âˆ€ Z â™ (Y âŠ† S Ë˜) [Y â‰” Z Ë˜] â€¢ (X âˆ© S Ë˜ âŠ† Y) [Y â‰” Z Ë˜])
      â‰¡âŸ¨ Substitution âŸ©
        X âŠ† R Ë˜ âˆ§ âˆ€ Z â™ Z Ë˜ âŠ† S Ë˜ â€¢ X âˆ© S Ë˜ âŠ† Z Ë˜
      â‰¡âŸ¨â€œË˜ connectionâ€, â€œIsotonicity of Ë˜â€âŸ©
        X Ë˜ âŠ† R âˆ§ âˆ€ Z â™ Z âŠ† S â€¢ (X âˆ© S Ë˜) Ë˜ âŠ† (Z Ë˜) Ë˜
      â‰¡âŸ¨ â€œConverse of âˆ©â€, â€œSelf-inverse of Ë˜â€âŸ© 
        X Ë˜ âŠ† R âˆ§ âˆ€ Z â™ Z âŠ† S â€¢ X Ë˜ âˆ© S âŠ† Z
      â‰¡âŸ¨ â€œCharacterisation of -â€ âŸ© 
        X Ë˜ âŠ† R - S 
      â‰¡âŸ¨ â€œË˜ connectionâ€âŸ©
        X âŠ† (R - S) Ë˜  
        

    

Theorem â€œConverse of -â€: (R - S) Ë˜ = R Ë˜ - S Ë˜
Proof:
    Using â€œIndirect Relation Equalityâ€:       
        â€” CalcCheck: Found â€œIndirect Relation Equalityâ€
        Subproof establishing `(âˆ€ X â€¢ X âŠ† R Ë˜ - S Ë˜ â‰¡ X âŠ† (R - S) Ë˜ )`:
            For any ` X`:
                Calculation establishing  `X âŠ† R Ë˜ - S Ë˜ â‰¡ X âŠ† (R - S) Ë˜`:
                        X âŠ† R Ë˜ - S Ë˜
                    â‰¡ âŸ¨ â€œCharacterisation of -â€ âŸ©
                            â€” CalcCheck: Found â€œCharacterisation of -â€
                            â€” CalcCheck: â”€ OK
                        X âŠ† R Ë˜ âˆ§ (âˆ€ Y â™ Y âŠ† S Ë˜ â€¢ X âˆ© S Ë˜ âŠ† Y )
                    â‰¡ âŸ¨ â€œConverse dummy in âˆ€â€ âŸ©
                            â€” CalcCheck: Found â€œConverse dummy in âˆ€â€
                            â€” CalcCheck: â”€ OK
                        X âŠ† R Ë˜ âˆ§ (âˆ€ Z â™ (Y âŠ† S Ë˜)[Y â‰” Z Ë˜] â€¢ (X âˆ© S Ë˜ âŠ† Y)[Y â‰” Z Ë˜] )
                    â‰¡ âŸ¨ Substitution âŸ©
                            â€” CalcCheck: â”€ OK
                        X âŠ† R Ë˜ âˆ§ (âˆ€ Z â™ Z Ë˜ âŠ† S Ë˜ â€¢ X âˆ© S Ë˜ âŠ† Z Ë˜ )
                    â‰¡ âŸ¨ â€œË˜ connectionâ€, â€œIsotonicity of Ë˜â€ âŸ©
                            â€” CalcCheck: Found â€œË˜ connectionâ€
                            â€” CalcCheck: Found â€œIsotonicity of Ë˜â€
                            â€” CalcCheck: â”€ OK
                        X Ë˜ âŠ† R âˆ§ (âˆ€ Z â™ Z âŠ† S â€¢ (X âˆ© S Ë˜) Ë˜ âŠ† (Z Ë˜) Ë˜ )
                    â‰¡ âŸ¨ â€œConverse of âˆ©â€, â€œSelf-inverse of Ë˜â€ âŸ©
                            â€” CalcCheck: Found â€œConverse of âˆ©â€
                            â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                            â€” CalcCheck: â”€ OK
                        X Ë˜ âŠ† R âˆ§ (âˆ€ Z â™ Z âŠ† S â€¢ X Ë˜ âˆ© S âŠ† Z )
                    â‰¡ âŸ¨ â€œCharacterisation of -â€ âŸ©
                            â€” CalcCheck: Found â€œCharacterisation of -â€
                            â€” CalcCheck: â”€ OK
                        X Ë˜ âŠ† R - S
                    â‰¡ âŸ¨ â€œË˜ connectionâ€ âŸ©
                            â€” CalcCheck: Found â€œË˜ connectionâ€
                            â€” CalcCheck: â”€ OK
                        X âŠ† (R - S) Ë˜                
                â€” CalcCheck: All steps OK
[14]
Linear Orders
[15]
On the integers, the linearity property of â‰¤ takes the following shape:

  âˆ€ x, y â€¢ x â‰¤ y  âˆ¨  y â‰¤ x
You know that the order â‰¤ on integers is linear, but the inclusion order âŠ† on power sets of sets with at least two elements is not linear â€” see the Hasse diagrams shown in the lecture.

For defining linearity of order relations in the current context, we resort to is-top introduced in Ref9.2:

[16]
Declaration: linear : A â†” A â†’ ğ”¹

Declaration: linear : A â†” A â†’ ğ”¹
[17]
Axiom â€œDefinition of `linear`â€:
    linear E  â‰¡  is-top (E âˆª E Ë˜)

Axiom â€œDefinition of `linear`â€: linear E â‰¡ is-top (E âˆª E Ë˜)
[18]
For an order E, the corresponding strict-order is obtained as C = E - ğ•€.

You have seen the following:

Theorem â€œComplement of <â€: a < b â‰¢ a â‰¥ b
Part of this kind of relationship between a linear order and the corresponding strict-order

[19]
Theorem â€œComplement of linear ordersâ€:
  order E âˆ§ linear E â‡’ is-top (E âˆª (E - ğ•€) Ë˜)
Proof:
  Assuming `order E âˆ§ linear E`:
        order E âˆ§ linear E â€” This is Assumption `order E âˆ§ linear E`
      â‰¡âŸ¨ â€œDefinition of `linear`â€ âŸ©
        order E âˆ§ is-top (E âˆª E Ë˜)
      â‡’âŸ¨ â€œWeakeningâ€âŸ©
        is-top (E Ë˜ âˆª E)
      =âŸ¨ Subproof for `(E Ë˜ âˆª E) = (E Ë˜ âˆª (E - ğ•€))`:
            (E Ë˜ âˆª E)
          =âŸ¨ â€œDifference in âˆªâ€ with Subproof for `ğ•€ âŠ† E Ë˜`:
                  order E âˆ§ linear E â€” This is Assumption `order E âˆ§ linear E`
                â‡’âŸ¨ â€œWeakeningâ€ âŸ©
                  order E
                â‰¡âŸ¨ â€œDefinition of orderâ€âŸ© 
                  reflexive E âˆ§ (antisymmetric E âˆ§ transitive E)
                â‰¡âŸ¨ â€œDefinition of reflexivityâ€, â€œDefinition of antisymmetryâ€, â€œDefinition of transitivityâ€âŸ©
                  ğ•€ âŠ† E âˆ§ (E âˆ© E Ë˜ âŠ† ğ•€ âˆ§ E â¨¾ E âŠ† E)
                â‡’âŸ¨ â€œWeakeningâ€âŸ©
                  ğ•€ âŠ† E
                â‰¡âŸ¨ â€œConverse of ğ•€â€âŸ©  
                  ğ•€ Ë˜ âŠ† E
                â‰¡âŸ¨ â€œË˜ connectionâ€âŸ© 
                  ğ•€ âŠ† E Ë˜
            âŸ© 
            (E Ë˜ âˆª (E - ğ•€))
        âŸ©  â•â•â• I âŠ† E Ë˜ â‡’ (E Ë˜ âˆª E) = (E Ë˜ âˆª (E - ğ•€)) 
        is-top (E Ë˜ âˆª (E - ğ•€))
      â‰¡âŸ¨ â€œSelf-inverse of Ë˜â€âŸ© 
        is-top (E Ë˜ âˆª ((E - ğ•€) Ë˜) Ë˜)
      â‰¡âŸ¨ â€œConverse of âˆªâ€âŸ© 
        is-top ((E âˆª (E - ğ•€) Ë˜) Ë˜)
      â‰¡âŸ¨ â€œConverse of top relationsâ€âŸ© 
        is-top (E âˆª (E - ğ•€) Ë˜)

Theorem â€œComplement of linear ordersâ€: order E âˆ§ linear E â‡’ is-top (E âˆª (E - ğ•€) Ë˜)
Proof:
    Assuming `order E âˆ§ linear E`:
    â€” CalcCheck: Assumption matches goal
        Calculation for expected goal  `is-top (E âˆª (E - ğ•€) Ë˜)`:
                order E âˆ§ linear E     â€” This is Assumption `order E âˆ§ linear E`
            â‰¡ âŸ¨ â€œDefinition of `linear`â€ âŸ©
                    â€” CalcCheck: Found â€œDefinition of `linear`â€
                    â€” CalcCheck: â”€ OK
                order E âˆ§ is-top (E âˆª E Ë˜)
            â‡’ âŸ¨ â€œWeakeningâ€ âŸ©
                    â€” CalcCheck: Found (3.76e) â€œWeakeningâ€, (3.76d) â€œWeakeningâ€, (3.76a) â€œWeakeningâ€, (3.76b) â€œWeakeningâ€, (3.76c) â€œWeakeningâ€, â€œWeakeningâ€
                    â€” CalcCheck: â”€ OK
                is-top (E Ë˜ âˆª E)
            = âŸ¨ Subproof for `E Ë˜ âˆª E = E Ë˜ âˆª (E - ğ•€)`:
                        E Ë˜ âˆª E
                    = âŸ¨ â€œDifference in âˆªâ€ with Subproof for `ğ•€ âŠ† E Ë˜`:
                                order E âˆ§ linear E     â€” This is Assumption `order E âˆ§ linear E`
                            â‡’ âŸ¨ â€œWeakeningâ€ âŸ©
                                    â€” CalcCheck: Found (3.76e) â€œWeakeningâ€, (3.76d) â€œWeakeningâ€, (3.76a) â€œWeakeningâ€, (3.76b) â€œWeakeningâ€, (3.76c) â€œWeakeningâ€, â€œWeakeningâ€
                                    â€” CalcCheck: â”€ OK
                                order E
                            â‰¡ âŸ¨ â€œDefinition of orderâ€ âŸ©
                                    â€” CalcCheck: Found â€œDefinition of orderâ€, â€œDefinition of orderâ€
                                    â€” CalcCheck: â”€ OK
                                reflexive E âˆ§ (antisymmetric E âˆ§ transitive E)
                            â‰¡ âŸ¨ â€œDefinition of reflexivityâ€, â€œDefinition of antisymmetryâ€, â€œDefinition of transitivityâ€ âŸ©
                                    â€” CalcCheck: Found â€œDefinition of reflexivityâ€
                                    â€” CalcCheck: Found â€œDefinition of antisymmetryâ€
                                    â€” CalcCheck: Found â€œDefinition of transitivityâ€
                                    â€” CalcCheck: â”€ OK
                                ğ•€ âŠ† E âˆ§ (E âˆ© E Ë˜ âŠ† ğ•€ âˆ§ E â¨¾ E âŠ† E)
                            â‡’ âŸ¨ â€œWeakeningâ€ âŸ©
                                    â€” CalcCheck: Found (3.76e) â€œWeakeningâ€, (3.76d) â€œWeakeningâ€, (3.76a) â€œWeakeningâ€, (3.76b) â€œWeakeningâ€, (3.76c) â€œWeakeningâ€, â€œWeakeningâ€
                                    â€” CalcCheck: â”€ OK
                                ğ•€ âŠ† E
                            â‰¡ âŸ¨ â€œConverse of ğ•€â€ âŸ©
                                    â€” CalcCheck: Found â€œConverse of ğ•€â€
                                    â€” CalcCheck: â”€ OK
                                ğ•€ Ë˜ âŠ† E
                            â‰¡ âŸ¨ â€œË˜ connectionâ€ âŸ©
                                    â€” CalcCheck: Found â€œË˜ connectionâ€
                                    â€” CalcCheck: â”€ OK
                                ğ•€ âŠ† E Ë˜                        
                        â€” CalcCheck: Found assumption `order E âˆ§ linear E`                       
                        â€” CalcCheck: All steps OK                       
                        â€” CalcCheck: Calculation matches goal â”€ OK
                        âŸ©
                            â€” CalcCheck: Found â€œDifference in âˆªâ€
                            â€” CalcCheck: â”€ OK
                        E Ë˜ âˆª (E - ğ•€)                
                â€” CalcCheck: All steps OK               
                â€” CalcCheck: Calculation matches goal â”€ OK
                âŸ©
                    â€” CalcCheck: â”€ OK
                is-top (E Ë˜ âˆª (E - ğ•€))
            â‰¡ âŸ¨ â€œSelf-inverse of Ë˜â€ âŸ©
                    â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                    â€” CalcCheck: â”€ OK
                is-top (E Ë˜ âˆª ((E - ğ•€) Ë˜) Ë˜)
            â‰¡ âŸ¨ â€œConverse of âˆªâ€ âŸ©
                    â€” CalcCheck: Found â€œConverse of âˆªâ€
                    â€” CalcCheck: â”€ OK
                is-top ((E âˆª (E - ğ•€) Ë˜) Ë˜)
            â‰¡ âŸ¨ â€œConverse of top relationsâ€ âŸ©
                    â€” CalcCheck: Found â€œConverse of top relationsâ€
                    â€” CalcCheck: â”€ OK
                is-top (E âˆª (E - ğ•€) Ë˜)        
        â€” CalcCheck: Found assumption `order E âˆ§ linear E`       
        â€” CalcCheck: All steps OK       
        â€” CalcCheck: Calculation matches goal â”€ OK
[20]
Symmetric Closure
[21]
Declaration:  symClos :  A â†” A  â†’  A â†” A

Declaration: symClos : A â†” A â†’ A â†” A
[22]
We first give an explicit definition for the symClos operation:

[23]
Axiom â€œDefinition of `symClos`â€:  symClos R  =  R âˆª R Ë˜

Axiom â€œDefinition of `symClos`â€: symClos R = R âˆª R Ë˜
[24]
Now we have to prove well-definedness of this closure operator â€” see Ref9.5 for the definition of _is_closure-of_, and read all the closure material in Ref9.5.

[25]
Theorem â€œWell-definedness of `symClos`â€:
    symClos R is symmetric closure-of R
Proof:
  Using â€œRelation closureâ€:
    Subproof for `R âŠ† symClos R`:
        R âŠ† symClos R
      â‰¡âŸ¨ â€œDefinition of `symClos`â€âŸ©
        R âŠ† R âˆª R Ë˜
      â‰¡âŸ¨ â€œWeakening for âˆªâ€âŸ©
        true  
    Subproof for `symmetric (symClos R)`:
        symmetric (symClos R)
      â‰¡âŸ¨ â€œDefinition of `symClos`â€âŸ©
        symmetric (R âˆª R Ë˜)
      â‰¡âŸ¨ â€œDefinition of symmetryâ€âŸ©
        (R âˆª R Ë˜) Ë˜ âŠ† (R âˆª R Ë˜)
      â‰¡âŸ¨â€œConverse of âˆªâ€, â€œSelf-inverse of Ë˜â€âŸ©
        R Ë˜ âˆª R âŠ† R âˆª R Ë˜
      â‰¡âŸ¨ â€œReflexivity of âŠ†â€âŸ©
        true 
    Subproof for `âˆ€ S â€¢ R âŠ† S  âˆ§  symmetric S  â‡’  symClos R âŠ† S`:
      For any `S`:
          R âŠ† S  âˆ§  symmetric S â‡’  symClos R âŠ† S
        â‰¡âŸ¨ Subproof for `R âŠ† S  âˆ§  symmetric S â‡’  symClos R âŠ† S`:
              Assuming `R âŠ† S`, `symmetric S`:
                  R âŠ† S â€” This is Assumption `R âŠ† S`
                â‰¡âŸ¨ â€œIdentity of âˆ§â€âŸ©
                  R âŠ† S âˆ§ true
                â‰¡âŸ¨ Subproof for `R Ë˜ âŠ† S`:
                        R âŠ† S â€” This is Assumption `R âŠ† S`
                      â‰¡âŸ¨ â€œIsotonicity of Ë˜â€âŸ©
                        R Ë˜ âŠ† S Ë˜
                      â‡’âŸ¨ â€œTransitivity of âŠ†â€âŸ© 
                        S Ë˜ âŠ† S â‡’ R Ë˜ âŠ† S
                      â‰¡âŸ¨ â€œDefinition of symmetryâ€ with Assumption `symmetric S` âŸ©
                        true â‡’ R Ë˜ âŠ† S
                      â‰¡âŸ¨ â€œLeft-identity of â‡’â€âŸ© 
                        R Ë˜ âŠ† S 
                  âŸ© 
                  R âŠ† S âˆ§ R Ë˜ âŠ† S
                â‰¡âŸ¨ â€œCharacterisation of âˆªâ€âŸ© 
                  (R âˆª R Ë˜) âŠ† S
                â‰¡âŸ¨ â€œDefinition of `symClos`â€âŸ©
                  symClos R âŠ† S
          âŸ© 
          true
        
        
      
          
        

Theorem â€œWell-definedness of `symClos`â€: symClos R is symmetric closure-of R
Proof:
    Using â€œRelation closureâ€:       
        â€” CalcCheck: Found â€œRelation closureâ€
        Subproof for `R âŠ† symClos R`:
                    R âŠ† symClos R
                â‰¡ âŸ¨ â€œDefinition of `symClos`â€ âŸ©
                        â€” CalcCheck: Found â€œDefinition of `symClos`â€
                        â€” CalcCheck: â”€ OK
                    R âŠ† R âˆª R Ë˜
                â‰¡ âŸ¨ â€œWeakening for âˆªâ€ âŸ©
                        â€” CalcCheck: Found â€œWeakening for âˆªâ€
                        â€” CalcCheck: â”€ OK
                    true            
            â€” CalcCheck: All steps OK           
            â€” CalcCheck: Calculation matches goal â”€ OK
        Subproof for `symmetric (symClos R)`:
                    symmetric (symClos R)
                â‰¡ âŸ¨ â€œDefinition of `symClos`â€ âŸ©
                        â€” CalcCheck: Found â€œDefinition of `symClos`â€
                        â€” CalcCheck: â”€ OK
                    symmetric (R âˆª R Ë˜)
                â‰¡ âŸ¨ â€œDefinition of symmetryâ€ âŸ©
                        â€” CalcCheck: Found â€œDefinition of symmetryâ€, â€œDefinition of symmetryâ€
                        â€” CalcCheck: â”€ OK
                    (R âˆª R Ë˜) Ë˜ âŠ† R âˆª R Ë˜
                â‰¡ âŸ¨ â€œConverse of âˆªâ€, â€œSelf-inverse of Ë˜â€ âŸ©
                        â€” CalcCheck: Found â€œConverse of âˆªâ€
                        â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                        â€” CalcCheck: â”€ OK
                    R Ë˜ âˆª R âŠ† R âˆª R Ë˜
                â‰¡ âŸ¨ â€œReflexivity of âŠ†â€ âŸ©
                        â€” CalcCheck: Found â€œReflexivity of âŠ†â€, â€œReflexivity of âŠ†â€
                        â€” CalcCheck: â”€ OK
                    true            
            â€” CalcCheck: All steps OK           
            â€” CalcCheck: Calculation matches goal â”€ OK
        Subproof for `(âˆ€ S â€¢ R âŠ† S âˆ§ symmetric S â‡’ symClos R âŠ† S )`:
            For any ` S`:
                Calculation for expected goal  `R âŠ† S âˆ§ symmetric S â‡’ symClos R âŠ† S`:
                        R âŠ† S âˆ§ symmetric S â‡’ symClos R âŠ† S
                    â‰¡ âŸ¨ Subproof for `R âŠ† S âˆ§ symmetric S â‡’ symClos R âŠ† S`:
                        Assuming `R âŠ† S` , `symmetric S`:
                        â€” CalcCheck: Assumptions match goal
                            Calculation for expected goal  `symClos R âŠ† S`:
                                    R âŠ† S     â€” This is Assumption `R âŠ† S`
                                â‰¡ âŸ¨ â€œIdentity of âˆ§â€ âŸ©
                                        â€” CalcCheck: Found (3.39) â€œIdentity of âˆ§â€
                                        â€” CalcCheck: â”€ OK
                                    R âŠ† S âˆ§ true
                                â‰¡ âŸ¨ Subproof for `R Ë˜ âŠ† S`:
                                            R âŠ† S     â€” This is Assumption `R âŠ† S`
                                        â‰¡ âŸ¨ â€œIsotonicity of Ë˜â€ âŸ©
                                                â€” CalcCheck: Found â€œIsotonicity of Ë˜â€
                                                â€” CalcCheck: â”€ OK
                                            R Ë˜ âŠ† S Ë˜
                                        â‡’ âŸ¨ â€œTransitivity of âŠ†â€ âŸ©
                                                â€” CalcCheck: Found â€œTransitivity of âŠ†â€, â€œTransitivity of âŠ†â€
                                                â€” CalcCheck: â”€ OK
                                            S Ë˜ âŠ† S â‡’ R Ë˜ âŠ† S
                                        â‰¡ âŸ¨ â€œDefinition of symmetryâ€ with Assumption `symmetric S` âŸ©
                                                â€” CalcCheck: Found â€œDefinition of symmetryâ€, â€œDefinition of symmetryâ€
                                                â€” CalcCheck: Found assumption `symmetric S`
                                                â€” CalcCheck: â”€ OK
                                            true â‡’ R Ë˜ âŠ† S
                                        â‰¡ âŸ¨ â€œLeft-identity of â‡’â€ âŸ©
                                                â€” CalcCheck: Found (3.73) â€œLeft-identity of â‡’â€
                                                â€” CalcCheck: â”€ OK
                                            R Ë˜ âŠ† S                                    
                                    â€” CalcCheck: Found assumption `R âŠ† S`                                   
                                    â€” CalcCheck: All steps OK                                   
                                    â€” CalcCheck: Calculation matches goal â”€ OK
                                    âŸ©
                                        â€” CalcCheck: â”€ OK
                                    R âŠ† S âˆ§ R Ë˜ âŠ† S
                                â‰¡ âŸ¨ â€œCharacterisation of âˆªâ€ âŸ©
                                        â€” CalcCheck: Found â€œCharacterisation of âˆªâ€
                                        â€” CalcCheck: â”€ OK
                                    R âˆª R Ë˜ âŠ† S
                                â‰¡ âŸ¨ â€œDefinition of `symClos`â€ âŸ©
                                        â€” CalcCheck: Found â€œDefinition of `symClos`â€
                                        â€” CalcCheck: â”€ OK
                                    symClos R âŠ† S                            
                            â€” CalcCheck: Found assumption `R âŠ† S`                           
                            â€” CalcCheck: All steps OK                           
                            â€” CalcCheck: Calculation matches goal â”€ OK
                        âŸ©
                            â€” CalcCheck: â”€ OK
                        true                
                â€” CalcCheck: All steps OK               
                â€” CalcCheck: Calculation matches goal â”€ OK