â€” Homework 5 Notebook 1: Leibniz as Axiom, Replacement
[1]
The propositional calculus up to implication is preloaded here, and also the usual equational integer properties including activation; you also have:

      â€œCancellation of +â€: a + b = a + c  â‰¡  b = c
[2]
Leibnizâ€™s Rule as an Axiom, Replacement Theorems
[3]
Be aware that metavariables like E and P here are intended to be instantiatable with arbitrary expressions.

All steps must remain valid not matter which expression such a metavariable is instantiated with.

Therefore, the following step is invalid:

    E[z â‰” 2]
  =âŸ¨ Substitution âŸ©
    E
One instantiation that shows this is instantiating E with z + 1; the resulting instance of the step above is clearly invalid:

    (z + 1)[z â‰” 2]
  =âŸ¨ Substitution âŸ©
    z + 1
Therefore substitutions into metavariables, such as E[z â‰” a], cannot be simplified.

[4]
The following axiom version of the inference rule (1.5) â€œLeibnizâ€ is presented in the last part of LADM Section 3.6 (pp. 60â€“61):

[5]
Axiom (3.83) â€œLeibnizâ€: e = f  â‡’  E[z â‰” e] = E[z â‰” f]

Axiom (3.83) â€œLeibnizâ€: e = f â‡’ E[z â‰” e] = E[z â‰” f]
[6]
Since the statement of this theorem involves substitution, and since CalcCheck does not yet use second-order matching, using this theorem requires making those substitutions explicit in some way.

For example, the following is not accepted:

    Fact: x = 3 â‡’ x + 2 = 5
    Proof:
       x = 3 â‡’ x + 2 = 5
     â‰¡âŸ¨ Fact `5 = 3 + 2` âŸ©
       x = 3 â‡’ x + 2 = 3 + 2  â€” This is (3.83) â€œLeibnizâ€
In such cases, an additional â€œbackwardsâ€ Substitution step is typically necessary:

[7]
Fact â€œH5.1aâ€: x = 3 â‡’ x + 2 = 5
Proof:
    x = 3 â‡’ x + 2 = 5
  â‰¡âŸ¨ Fact `5 = 3 + 2` âŸ©
    x = 3 â‡’ x + 2 = 3 + 2
  â‰¡âŸ¨ Substitution âŸ©
    x = 3 â‡’ (z + 2)[z â‰” x] = (z + 2)[z â‰” 3]
  â€” This is (3.83) â€œLeibnizâ€

Fact â€œH5.1aâ€: x = 3 â‡’ x + 2 = 5
Proof:
    Calculation for expected goal  `x = 3 â‡’ x + 2 = 5`:
            x = 3 â‡’ x + 2 = 5
        â‰¡ âŸ¨ Fact `5 = 3 + 2` âŸ©
                â€” CalcCheck: â”€ OK
            x = 3 â‡’ x + 2 = 3 + 2
        â‰¡ âŸ¨ Substitution âŸ©
                â€” CalcCheck: â”€ OK
            x = 3 â‡’ (z + 2)[z â‰” x] = (z + 2)[z â‰” 3]     â€” This is (3.83) â€œLeibnizâ€    
    â€” CalcCheck: Found (3.83) â€œLeibnizâ€   
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[8]
The â€œLeibnizâ€ axiom above is an implication; all the theorems derived from it in LADM Section 3.6 are equivalences.

As far as these equivalences specialise the argument type of one or both of the equalities = in the â€œLeibnizâ€ axiom to ğ”¹, LADM silently uses â‰¡ instead of =.

Since these two are treated as different in CalcCheck, additional conversion steps are required, using the conversion theorem you already know:

â€œDefinition of â‰¡â€:  (p â‰¡ q) = (p = q)
Find the right implication property (see Ex3.1) to reference in the place of the question mark in the first of these properties â€” while LADM names these â€œSubstitutionâ€, we prefer the name â€œReplacementâ€ (not least to avoid confusion with the keyword Substitution):

[9]
Theorem (3.84) (3.84a) â€œReplacementâ€:
    (e = f) âˆ§ E[z â‰” e]  â‰¡  (e = f) âˆ§ E[z â‰” f]
Proof:
    (e = f) âˆ§ E[z â‰” e] â‰¡ (e = f) âˆ§ E[z â‰” f]
  â‰¡âŸ¨ â€œGolden ruleâ€ âŸ©
    ((e = f) â‰¡ (E[z â‰” e] â‰¡ ((e = f) âˆ¨ E[z â‰” e] ))) â‰¡  ((e = f) â‰¡ (E[z â‰” f] â‰¡ ( (e = f) âˆ¨ E[z â‰” f])))
  â‰¡âŸ¨ â€œImplication via âˆ¨â€âŸ©
    ((e = f) â‰¡ (e = f) â‡’ E[z â‰” e]) â‰¡ ((e = f) â‰¡ (e = f) â‡’ E[z â‰” f])
  â‰¡âŸ¨ â€œIdentity of â‰¡â€âŸ©
    ((e = f) â‡’ E[z â‰” e]) â‰¡ ((e = f) â‡’ E[z â‰” f])
  â‰¡âŸ¨ â€œDistributivity of â‡’ over â‰¡â€âŸ©
    (e = f) â‡’ (E[z â‰” e] â‰¡ E[z â‰” f])
  â‰¡âŸ¨ â€œDefinition of â‰¡â€ âŸ©
    e = f â‡’ E[z â‰” e] = E[z â‰” f] â€” This is â€œLeibnizâ€

Theorem (3.84) (3.84a) â€œReplacementâ€: e = f âˆ§ E[z â‰” e] â‰¡ e = f âˆ§ E[z â‰” f]
Proof:
    Calculation for expected goal  `e = f âˆ§ E[z â‰” e] â‰¡ e = f âˆ§ E[z â‰” f]`:
            e = f âˆ§ E[z â‰” e] â‰¡ e = f âˆ§ E[z â‰” f]
        â‰¡ âŸ¨ â€œGolden ruleâ€ âŸ©
                â€” CalcCheck: Found (3.35) â€œGolden ruleâ€
                â€” CalcCheck: â”€ OK
            (e = f â‰¡ (E[z â‰” e] â‰¡ e = f âˆ¨ E[z â‰” e])) â‰¡ (e = f â‰¡ (E[z â‰” f] â‰¡ e = f âˆ¨ E[z â‰” f]))
        â‰¡ âŸ¨ â€œImplication via âˆ¨â€ âŸ©
                â€” CalcCheck: Found (3.57=) â€œImplication via âˆ¨â€
                â€” CalcCheck: â”€ OK
            (e = f â‰¡ e = f â‡’ E[z â‰” e]) â‰¡ (e = f â‰¡ e = f â‡’ E[z â‰” f])
        â‰¡ âŸ¨ â€œIdentity of â‰¡â€ âŸ©
                â€” CalcCheck: Found (3.3) â€œIdentity of â‰¡â€
                â€” CalcCheck: â”€ OK
            e = f â‡’ E[z â‰” e] â‰¡ e = f â‡’ E[z â‰” f]
        â‰¡ âŸ¨ â€œDistributivity of â‡’ over â‰¡â€ âŸ©
                â€” CalcCheck: Found (3.63) â€œDistributivity of â‡’ over â‰¡â€
                â€” CalcCheck: â”€ OK
            e = f â‡’ (E[z â‰” e] â‰¡ E[z â‰” f])
        â‰¡ âŸ¨ â€œDefinition of â‰¡â€ âŸ©
                â€” CalcCheck: Found â€œDefinition of â‰¡â€
                â€” CalcCheck: â”€ OK
            e = f â‡’ E[z â‰” e] = E[z â‰” f]     â€” This is â€œLeibnizâ€    
    â€” CalcCheck: Found (3.83) â€œLeibnizâ€   
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[10]
This can be used to show, for example, that â€œsuperfluous reformulationsâ€ donâ€™t make a difference:

[11]
Fact â€œH5.1bâ€: (n = 5) âˆ§ (2 Â· n - 3 = 7)  â‰¡  (n = 5)
Proof:
    (n = 5) âˆ§ (2 Â· n - 3 = 7)
  â‰¡âŸ¨ Substitution âŸ©
    (n = 5) âˆ§ (2 Â· z - 3 = 7)[z â‰” n]
  â‰¡âŸ¨ â€œReplacementâ€ âŸ©
    (n = 5) âˆ§ (2 Â· z - 3 = 7)[z â‰” 5]
  â‰¡âŸ¨ Substitution âŸ©
    (n = 5) âˆ§ (2 Â· 5 - 3 = 7)
  â‰¡âŸ¨ Fact `2 Â· 5 - 3 = 7` âŸ©
    (n = 5) âˆ§ true
  â‰¡âŸ¨ â€œIdentity of âˆ§â€ âŸ©
    (n = 5)

Fact â€œH5.1bâ€: n = 5 âˆ§ 2 Â· n - 3 = 7 â‰¡ n = 5
Proof:
    Calculation for expected goal  `n = 5 âˆ§ 2 Â· n - 3 = 7 â‰¡ n = 5`:
            n = 5 âˆ§ 2 Â· n - 3 = 7
        â‰¡ âŸ¨ Substitution âŸ©
                â€” CalcCheck: â”€ OK
            n = 5 âˆ§ (2 Â· z - 3 = 7)[z â‰” n]
        â‰¡ âŸ¨ â€œReplacementâ€ âŸ©
                â€” CalcCheck: Found (3.84a) â€œReplacementâ€, (3.51) â€œReplacementâ€
                â€” CalcCheck: â”€ OK
            n = 5 âˆ§ (2 Â· z - 3 = 7)[z â‰” 5]
        â‰¡ âŸ¨ Substitution âŸ©
                â€” CalcCheck: â”€ OK
            n = 5 âˆ§ 2 Â· 5 - 3 = 7
        â‰¡ âŸ¨ Fact `2 Â· 5 - 3 = 7` âŸ©
                â€” CalcCheck: â”€ OK
            n = 5 âˆ§ true
        â‰¡ âŸ¨ â€œIdentity of âˆ§â€ âŸ©
                â€” CalcCheck: Found (3.39) â€œIdentity of âˆ§â€
                â€” CalcCheck: â”€ OK
            n = 5    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[12]
Situations like the one in the following Lemma (H5.1b) frequently occur in program correctness proofs â€” prove this example using â€œReplacementâ€:

[13]
Lemma (H5.1c):
     s = 2 Â· n + 1  âˆ§  q + s = (n + 1) Â· (n + 1)
  â‰¡  s = 2 Â· n + 1  âˆ§  q     = n Â· n
Proof:
    s = 2 Â· n + 1  âˆ§  q + s = (n + 1) Â· (n + 1)
  â‰¡âŸ¨ â€œDistributivity of Â· over +â€âŸ©
    s = 2 Â· n + 1  âˆ§  q + s = (n Â· n) + (1 Â· n) + (1 Â· n) + 1 Â· 1
  â‰¡âŸ¨ â€œDistributivity of Â· over +â€ âŸ©
    s = 2 Â· n + 1  âˆ§  q + s = (n Â· n) + ((1 + 1) Â· n) + 1 Â· 1
  â‰¡âŸ¨ Fact `1 + 1 = 2` âŸ©
    s = 2 Â· n + 1  âˆ§  q + s = (n Â· n) + 2 Â· n + 1 Â· 1
  â‰¡âŸ¨ Fact `1 Â· 1 = 1`âŸ©
    s = 2 Â· n + 1  âˆ§  q + s = (n Â· n) + 2 Â· n + 1
  â‰¡âŸ¨ Substitution âŸ©
    s = 2 Â· n + 1  âˆ§  (q + z = (n Â· n) + (2 Â· n + 1)) [z â‰” s]
  â‰¡âŸ¨ â€œReplacementâ€âŸ© 
    s = 2 Â· n + 1  âˆ§  (q + z = (n Â· n) + (2 Â· n + 1)) [z â‰” 2 Â· n + 1] 
  â‰¡âŸ¨ Substitution âŸ©
    s = 2 Â· n + 1  âˆ§  (q + (2 Â· n + 1) = (n Â· n) + (2 Â· n + 1))
  â‰¡âŸ¨ â€œCancellation of +â€ âŸ©
    s = 2 Â· n + 1  âˆ§ q = (n Â· n)

 

Lemma (H5.1c): s = 2 Â· n + 1 âˆ§ q + s = (n + 1) Â· (n + 1) â‰¡ s = 2 Â· n + 1 âˆ§ q = n Â· n
Proof:
    Calculation for expected goal  `s = 2 Â· n + 1 âˆ§ q + s = (n + 1) Â· (n + 1) â‰¡ s = 2 Â· n + 1 âˆ§ q = n Â· n`:
            s = 2 Â· n + 1 âˆ§ q + s = (n + 1) Â· (n + 1)
        â‰¡ âŸ¨ â€œDistributivity of Â· over +â€ âŸ©
                â€” CalcCheck: Found (15.5) â€œDistributivity of Â· over +â€
                â€” CalcCheck: â”€ OK
            s = 2 Â· n + 1 âˆ§ q + s = ((n Â· n + 1 Â· n) + 1 Â· n) + 1 Â· 1
        â‰¡ âŸ¨ â€œDistributivity of Â· over +â€ âŸ©
                â€” CalcCheck: Found (15.5) â€œDistributivity of Â· over +â€
                â€” CalcCheck: â”€ OK
            s = 2 Â· n + 1 âˆ§ q + s = (n Â· n + (1 + 1) Â· n) + 1 Â· 1
        â‰¡ âŸ¨ Fact `1 + 1 = 2` âŸ©
                â€” CalcCheck: â”€ OK
            s = 2 Â· n + 1 âˆ§ q + s = (n Â· n + 2 Â· n) + 1 Â· 1
        â‰¡ âŸ¨ Fact `1 Â· 1 = 1` âŸ©
                â€” CalcCheck: â”€ OK
            s = 2 Â· n + 1 âˆ§ q + s = (n Â· n + 2 Â· n) + 1
        â‰¡ âŸ¨ Substitution âŸ©
                â€” CalcCheck: â”€ OK
            s = 2 Â· n + 1 âˆ§ (q + z = n Â· n + (2 Â· n + 1))[z â‰” s]
        â‰¡ âŸ¨ â€œReplacementâ€ âŸ©
                â€” CalcCheck: Found (3.84a) â€œReplacementâ€, (3.51) â€œReplacementâ€
                â€” CalcCheck: â”€ OK
            s = 2 Â· n + 1 âˆ§ (q + z = n Â· n + (2 Â· n + 1))[z â‰” 2 Â· n + 1]
        â‰¡ âŸ¨ Substitution âŸ©
                â€” CalcCheck: â”€ OK
            s = 2 Â· n + 1 âˆ§ q + (2 Â· n + 1) = n Â· n + (2 Â· n + 1)
        â‰¡ âŸ¨ â€œCancellation of +â€ âŸ©
                â€” CalcCheck: Found (15.8) â€œCancellation of +â€
                â€” CalcCheck: â”€ OK
            s = 2 Â· n + 1 âˆ§ q = n Â· n    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[14]
Feedback
[15]
This was (every answer is right; â€œno answerâ€ is wrong):

  all very easy
  generally easy
  OK
  occasionally hard
  mostly hard
  all very hard
[16]
This was (every answer is right; â€œno answerâ€ is wrong):

  all very boring
  mostly boring
  OK
  occasionally interesting
  mostly interesting
  all very interesting
[17]
Concluding Declaration
[18]
Your answers above are completely your own work? (â€œNo answerâ€ is wrong.)

  Yes
  No