â€” Homework 12: Heterogeneous Relation Properties
[1]
Building on the set and relation operations and properties from Ref6.1, H10.3, and Ref8.1, we now introduce several properties of heterogeneous relations, that is, of relations that are not assumed to be of type A â†” A for some type A.

The keyword Monotonicity is not enabled here. Four hint items are allowed per hint.

(â€œ?â‚â€ must always be replaced by just a single (possibly structured) hint item, while simple â€œ?â€ hints will need to be expanded into arbitrarily-long calculations.)

[2]
Univalence
[3]
A relation is univalent iff it relates each argument with at most one result.

We define the univalence predicate for relations using the relation-algebraic formulation:

[4]
Declaration: univalent : A â†” B  â†’  ğ”¹
Axiom â€œDefinition of univalenceâ€:
    univalent R   â‰¡  R Ë˜ â¨¾ R âŠ† ğ•€

Declaration: univalent : A â†” B â†’ ğ”¹
Axiom â€œDefinition of univalenceâ€: univalent R â‰¡ R Ë˜ â¨¾ R âŠ† ğ•€
[5]
It is easy to prove preservation of univalence by composition relation-algebraically from this definition â€” for these relation-algebraic proofs, you will need to use theorems from Ref8.1.

[6]
Theorem â€œUnivalence of compositionâ€:
     univalent R â‡’ univalent S â‡’ univalent (R â¨¾ S)
Proof:
  Assuming `univalent R` and using with â€œDefinition of univalenceâ€,
           `univalent S` and using with â€œDefinition of univalenceâ€:
    Using â€œDefinition of univalenceâ€:
        (R â¨¾ S) Ë˜ â¨¾ (R â¨¾ S)
      =âŸ¨ â€œConverse of â¨¾â€ âŸ©
        (S Ë˜ â¨¾ R Ë˜) â¨¾ R â¨¾ S
      =âŸ¨ â€œAssociativity of â¨¾â€ âŸ©
        S Ë˜ â¨¾ (R Ë˜ â¨¾ R) â¨¾ S
      âŠ†âŸ¨ â€œMonotonicity of â¨¾â€ with â€œMonotonicity of â¨¾â€ with
         Assumption `univalent R` âŸ©
        S Ë˜ â¨¾ ğ•€ â¨¾ S
      =âŸ¨ â€œIdentity of â¨¾â€ âŸ©
        S Ë˜ â¨¾ S
      âŠ†âŸ¨ Assumption `univalent S`âŸ©
        ğ•€

Theorem â€œUnivalence of compositionâ€: univalent R â‡’ (univalent S â‡’ univalent (R â¨¾ S))
Proof:
    Assuming `univalent R` and using with â€œDefinition of univalenceâ€
    â€” CalcCheck: Found â€œDefinition of univalenceâ€ , `univalent S` and using with â€œDefinition of univalenceâ€
    â€” CalcCheck: Found â€œDefinition of univalenceâ€:
    â€” CalcCheck: Assumptions match goal
        Using â€œDefinition of univalenceâ€:           
            â€” CalcCheck: Found â€œDefinition of univalenceâ€
            Subproof establishing `(R â¨¾ S) Ë˜ â¨¾ (R â¨¾ S) âŠ† ğ•€`:
                        (R â¨¾ S) Ë˜ â¨¾ (R â¨¾ S)
                    = âŸ¨ â€œConverse of â¨¾â€ âŸ©
                            â€” CalcCheck: Found â€œConverse of â¨¾â€
                            â€” CalcCheck: â”€ OK
                        (S Ë˜ â¨¾ R Ë˜) â¨¾ (R â¨¾ S)
                    = âŸ¨ â€œAssociativity of â¨¾â€ âŸ©
                            â€” CalcCheck: Found â€œAssociativity of â¨¾â€
                            â€” CalcCheck: OK (no change)
                            â€” CalcCheck: â”€ OK
                        S Ë˜ â¨¾ ((R Ë˜ â¨¾ R) â¨¾ S)
                    âŠ† âŸ¨ â€œMonotonicity of â¨¾â€ with â€œMonotonicity of â¨¾â€ with Assumption `univalent R` âŸ©
                            â€” CalcCheck: Found â€œMonotonicity of â¨¾â€
                            â€” CalcCheck: Found assumption `univalent R`
                            â€” CalcCheck: â”€ OK
                        S Ë˜ â¨¾ (ğ•€ â¨¾ S)
                    = âŸ¨ â€œIdentity of â¨¾â€ âŸ©
                            â€” CalcCheck: Found â€œIdentity of â¨¾â€
                            â€” CalcCheck: â”€ OK
                        S Ë˜ â¨¾ S
                    âŠ† âŸ¨ Assumption `univalent S` âŸ©
                            â€” CalcCheck: Found assumption `univalent S`
                            â€” CalcCheck: â”€ OK
                        ğ•€                
                â€” CalcCheck: All steps OK
[7]
From the above â€œDefinition of univalenceâ€ we can prove the most common predicate-logic formulation of univalence in a straight-forward equivalence calculation using mainly the definitions of the relation operations from H10.3, and predicate logic. Here, you may in particular need â€œDistributivity of âˆ¨ over âˆ€â€ or â€œWitnessâ€ (pay attention to the proviso in either case!):

[8]
Theorem â€œUnivalenceâ€:
      univalent R
   â‰¡  âˆ€ bâ‚ â€¢ âˆ€ bâ‚‚ â€¢ âˆ€ a â€¢ a â¦— R â¦˜ bâ‚ âˆ§ a â¦— R â¦˜ bâ‚‚ â‡’ bâ‚ = bâ‚‚
Proof:
    univalent R
  â‰¡âŸ¨ â€œDefinition of univalenceâ€âŸ©
    R Ë˜ â¨¾ R âŠ† ğ•€
  â‰¡âŸ¨ â€œRelation inclusionâ€âŸ©
    (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ bâ‚ â¦— R Ë˜ â¨¾ R â¦˜ bâ‚‚ â‡’ bâ‚ â¦— ğ•€ â¦˜ bâ‚‚ ) )
  â‰¡âŸ¨â€œRelation compositionâ€, â€œIdentity relationâ€, â€œRelation converseâ€âŸ©
    (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ (âˆƒ a â€¢ (a â¦— R â¦˜ bâ‚ âˆ§ a â¦— R â¦˜ bâ‚‚)) â‡’ bâ‚ = bâ‚‚ ) ) 
  â‰¡âŸ¨ â€œWitnessâ€ âŸ©
    âˆ€ bâ‚ â€¢ âˆ€ bâ‚‚ â€¢ (âˆ€ a â€¢ ((a â¦— R â¦˜ bâ‚ âˆ§ a â¦— R â¦˜ bâ‚‚) â‡’ bâ‚ = bâ‚‚))

Theorem â€œUnivalenceâ€: univalent R â‰¡ (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ (âˆ€ a â€¢ a â¦— R â¦˜ bâ‚ âˆ§ a â¦— R â¦˜ bâ‚‚ â‡’ bâ‚ = bâ‚‚ ) ) )   
    â€” CalcCheck: Proviso: Â¬occurs(`a, bâ‚, bâ‚‚`, `R`)
Proof:
    Calculation for expected goal  `univalent R â‰¡ (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ (âˆ€ a â€¢ a â¦— R â¦˜ bâ‚ âˆ§ a â¦— R â¦˜ bâ‚‚ â‡’ bâ‚ = bâ‚‚ ) ) )`:
            univalent R
        â‰¡ âŸ¨ â€œDefinition of univalenceâ€ âŸ©
                â€” CalcCheck: Found â€œDefinition of univalenceâ€
                â€” CalcCheck: â”€ OK
            R Ë˜ â¨¾ R âŠ† ğ•€
        â‰¡ âŸ¨ â€œRelation inclusionâ€ âŸ©
                â€” CalcCheck: Found â€œRelation inclusionâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ bâ‚ â¦— R Ë˜ â¨¾ R â¦˜ bâ‚‚ â‡’ bâ‚ â¦— ğ•€ â¦˜ bâ‚‚ ) )
        â‰¡ âŸ¨ â€œRelation compositionâ€, â€œIdentity relationâ€, â€œRelation converseâ€ âŸ©
                â€” CalcCheck: Found â€œRelation compositionâ€
                â€” CalcCheck: Found â€œRelationship via ğ•€â€
                â€” CalcCheck: Found â€œRelation converseâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ (âˆƒ a â€¢ a â¦— R â¦˜ bâ‚ âˆ§ a â¦— R â¦˜ bâ‚‚ ) â‡’ bâ‚ = bâ‚‚ ) )
        â‰¡ âŸ¨ â€œWitnessâ€ âŸ©
                â€” CalcCheck: Found (9.30.1) â€œWitnessâ€, (9.30.2) â€œWitnessâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ (âˆ€ a â€¢ a â¦— R â¦˜ bâ‚ âˆ§ a â¦— R â¦˜ bâ‚‚ â‡’ bâ‚ = bâ‚‚ ) ) )    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[9]
Now imagine proving â€œUnivalence of compositionâ€ via â€œUnivalenceâ€ in predicate logicâ€¦

[10]
Totality
[11]
A relation is total if it relates each argument with at least one result.

We define the totality predicate for relations using the relation-algebraic formulation:

[12]
Declaration: total : A â†” B  â†’  ğ”¹
Axiom â€œDefinition of totalityâ€:
      total R       â‰¡  ğ•€ âŠ† R â¨¾ R Ë˜

Declaration: total : A â†” B â†’ ğ”¹
Axiom â€œDefinition of totalityâ€: total R â‰¡ ğ•€ âŠ† R â¨¾ R Ë˜
[13]
Using a purely relation-algebraic proof, you obtain â€œTotality of unionâ€ from this definition:

[14]
Theorem â€œTotality of unionâ€:
    total R â‡’ total S â‡’ total (R âˆª S)
Proof:
  Assuming `total R` and using with â€œDefinition of totalityâ€,
           `total S`:
    Using â€œDefinition of totalityâ€:
        (R âˆª S) â¨¾ (R âˆª S) Ë˜
      =âŸ¨ â€œConverse of âˆªâ€ âŸ©
        (R âˆª S) â¨¾ (R Ë˜ âˆª S Ë˜)
      =âŸ¨ â€œDistributivity of â¨¾ over âˆªâ€ âŸ©
        R â¨¾ R Ë˜ âˆª R â¨¾ S Ë˜ âˆª S â¨¾ R Ë˜ âˆª S â¨¾ S Ë˜
      âŠ‡âŸ¨ â€œWeakening of âˆªâ€ âŸ©
        R â¨¾ R Ë˜
      âŠ‡âŸ¨ Assumption `total R` âŸ©
        ğ•€

Theorem â€œTotality of unionâ€: total R â‡’ (total S â‡’ total (R âˆª S))
Proof:
    Assuming `total R` and using with â€œDefinition of totalityâ€
    â€” CalcCheck: Found â€œDefinition of totalityâ€ , `total S`:
    â€” CalcCheck: Assumptions match goal
        Using â€œDefinition of totalityâ€:           
            â€” CalcCheck: Found â€œDefinition of totalityâ€
            Subproof establishing `(R âˆª S) â¨¾ (R âˆª S) Ë˜ âŠ‡ ğ•€`:
                        (R âˆª S) â¨¾ (R âˆª S) Ë˜
                    = âŸ¨ â€œConverse of âˆªâ€ âŸ©
                            â€” CalcCheck: Found â€œConverse of âˆªâ€
                            â€” CalcCheck: â”€ OK
                        (R âˆª S) â¨¾ (R Ë˜ âˆª S Ë˜)
                    = âŸ¨ â€œDistributivity of â¨¾ over âˆªâ€ âŸ©
                            â€” CalcCheck: Found â€œDistributivity of â¨¾ over âˆªâ€
                            â€” CalcCheck: â”€ OK
                        R â¨¾ R Ë˜ âˆª (R â¨¾ S Ë˜ âˆª (S â¨¾ R Ë˜ âˆª S â¨¾ S Ë˜))
                    âŠ‡ âŸ¨ â€œWeakening of âˆªâ€ âŸ©
                            â€” CalcCheck: Found (11.31) â€œWeakening of âˆªâ€
                            â€” CalcCheck: â”€ OK
                        R â¨¾ R Ë˜
                    âŠ‡ âŸ¨ Assumption `total R` âŸ©
                            â€” CalcCheck: Found assumption `total R`
                            â€” CalcCheck: â”€ OK
                        ğ•€                
                â€” CalcCheck: All steps OK
[15]
The most convenient predicate-logic formulation of the definition of totalisy again follows in a straight-forward equivalence calculation:

[16]
Theorem â€œTotalityâ€: total R  â‰¡  âˆ€ a â€¢ âˆƒ b â€¢ a â¦— R â¦˜ b
Proof:
    total R
  â‰¡âŸ¨ â€œDefinition of totalityâ€ âŸ©
    ğ•€ âŠ† R â¨¾ R Ë˜
  â‰¡âŸ¨ â€œRelation inclusionâ€âŸ©
    (âˆ€ a â€¢ (âˆ€ b â€¢ a â¦— ğ•€ â¦˜ b â‡’ a â¦— R â¨¾ R Ë˜ â¦˜ b ) ) 
  â‰¡âŸ¨ â€œIdentity relationâ€âŸ©
    (âˆ€ a â€¢ (âˆ€ b â€¢ (a = b) â‡’ a â¦— R â¨¾ R Ë˜ â¦˜ b ) ) 
  â‰¡âŸ¨ â€œRelation compositionâ€âŸ©
    (âˆ€ a â€¢ (âˆ€ b â€¢ (a = b) â‡’ âˆƒ bâ‚ â€¢ a â¦— R â¦˜ bâ‚  âˆ§  bâ‚ â¦— R Ë˜ â¦˜ b ) ) 
  â‰¡âŸ¨ â€œRelation converseâ€âŸ©
    (âˆ€ a â€¢ (âˆ€ b â€¢ (a = b) â‡’ âˆƒ bâ‚ â€¢ a â¦— R â¦˜ bâ‚  âˆ§  b â¦— R â¦˜ bâ‚) ) 
  â‰¡âŸ¨ â€œTrading for âˆ€â€âŸ©
    (âˆ€ a â€¢ (âˆ€ b â™ (a = b) â€¢ âˆƒ bâ‚ â€¢ a â¦— R â¦˜ bâ‚  âˆ§  b â¦— R â¦˜ bâ‚) )
  â‰¡âŸ¨ â€œOne-point rule for âˆ€â€âŸ©  
    (âˆ€ a â€¢ (âˆƒ x â€¢ a â¦— R â¦˜ x  âˆ§  b â¦— R â¦˜ x)[ b â‰” a ] )
  â‰¡âŸ¨ Substitution âŸ©
    (âˆ€ a â€¢ (âˆƒ x â€¢ a â¦— R â¦˜ x  âˆ§  a â¦— R â¦˜ x))
  â‰¡âŸ¨ â€œIdempotency of âˆ§â€âŸ©
    (âˆ€ a â€¢ (âˆƒ x â€¢ a â¦— R â¦˜ x ))
  â‰¡âŸ¨ â€œIdentity of â‰¡â€ âŸ© 
    âˆ€ a â€¢ âˆƒ b â€¢ a â¦— R â¦˜ b

Theorem â€œTotalityâ€: total R â‰¡ (âˆ€ a â€¢ (âˆƒ b â€¢ a â¦— R â¦˜ b ) )   
    â€” CalcCheck: Proviso: Â¬occurs(`a, b`, `R`)
Proof:
    Calculation for expected goal  `total R â‰¡ (âˆ€ a â€¢ (âˆƒ b â€¢ a â¦— R â¦˜ b ) )`:
            total R
        â‰¡ âŸ¨ â€œDefinition of totalityâ€ âŸ©
                â€” CalcCheck: Found â€œDefinition of totalityâ€
                â€” CalcCheck: â”€ OK
            ğ•€ âŠ† R â¨¾ R Ë˜
        â‰¡ âŸ¨ â€œRelation inclusionâ€ âŸ©
                â€” CalcCheck: Found â€œRelation inclusionâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆ€ b â€¢ a â¦— ğ•€ â¦˜ b â‡’ a â¦— R â¨¾ R Ë˜ â¦˜ b ) )
        â‰¡ âŸ¨ â€œIdentity relationâ€ âŸ©
                â€” CalcCheck: Found â€œRelationship via ğ•€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆ€ b â€¢ a = b â‡’ a â¦— R â¨¾ R Ë˜ â¦˜ b ) )
        â‰¡ âŸ¨ â€œRelation compositionâ€ âŸ©
                â€” CalcCheck: Found â€œRelation compositionâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆ€ b â€¢ a = b â‡’ (âˆƒ bâ‚ â€¢ a â¦— R â¦˜ bâ‚ âˆ§ bâ‚ â¦— R Ë˜ â¦˜ b ) ) )
        â‰¡ âŸ¨ â€œRelation converseâ€ âŸ©
                â€” CalcCheck: Found â€œRelation converseâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆ€ b â€¢ a = b â‡’ (âˆƒ bâ‚ â€¢ a â¦— R â¦˜ bâ‚ âˆ§ b â¦— R â¦˜ bâ‚ ) ) )
        â‰¡ âŸ¨ â€œTrading for âˆ€â€ âŸ©
                â€” CalcCheck: Found (9.3a) â€œTrading for âˆ€â€, (9.3b) â€œTrading for âˆ€â€, (9.3c) â€œTrading for âˆ€â€, (9.4a) â€œTrading for âˆ€â€, (9.4b) â€œTrading for âˆ€â€, (9.4c) â€œTrading for âˆ€â€, (9.4d) â€œTrading for âˆ€â€, (9.2) â€œTrading for âˆ€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆ€ b â™ a = b â€¢ (âˆƒ bâ‚ â€¢ a â¦— R â¦˜ bâ‚ âˆ§ b â¦— R â¦˜ bâ‚ ) ) )
        â‰¡ âŸ¨ â€œOne-point rule for âˆ€â€ âŸ©
                â€” CalcCheck: Found (8.14) â€œOne-point rule for âˆ€â€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆƒ x â€¢ a â¦— R â¦˜ x âˆ§ b â¦— R â¦˜ x )[b â‰” a] )
        â‰¡ âŸ¨ Substitution âŸ©
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆƒ x â€¢ a â¦— R â¦˜ x âˆ§ a â¦— R â¦˜ x ) )
        â‰¡ âŸ¨ â€œIdempotency of âˆ§â€ âŸ©
                â€” CalcCheck: Found (3.38) â€œIdempotency of âˆ§â€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆƒ x â€¢ a â¦— R â¦˜ x ) )
        â‰¡ âŸ¨ â€œIdentity of â‰¡â€ âŸ©
                â€” CalcCheck: Found (3.3) â€œIdentity of â‰¡â€
                â€” CalcCheck: OK (no change)
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆƒ b â€¢ a â¦— R â¦˜ b ) )    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[17]
Another quantifier-free formulation of totality is not strictly relation algebraic, since it involves not only relations, but also sets (the universal set ğ” and the set Dom R) â€” this is sometimes called â€œPeirce-algebraicâ€:

[18]
Theorem â€œDomain of total relationsâ€:
    total R  â‰¡  ğ” âŠ† Dom R
Proof:
    ğ” âŠ† Dom R
  â‰¡âŸ¨ â€œSet inclusionâ€ âŸ©
    âˆ€ a â€¢ a âˆˆ ğ” â‡’ a âˆˆ Dom R
  â‰¡âŸ¨ â€œUniversal setâ€, â€œLeft-identity of â‡’â€ âŸ©  
    âˆ€ a â€¢ a âˆˆ Dom R
  â‰¡âŸ¨ â€œMembership in `Dom`â€ âŸ© 
    âˆ€ a â€¢ âˆƒ b â€¢ a â¦— R â¦˜ b
  â‰¡âŸ¨ â€œTotalityâ€ âŸ©
    total R

Theorem â€œDomain of total relationsâ€: total R â‰¡ ğ” âŠ† Dom R
Proof:
    Calculation for expected goal  `total R â‰¡ ğ” âŠ† Dom R`:
            ğ” âŠ† Dom R
        â‰¡ âŸ¨ â€œSet inclusionâ€ âŸ©
                â€” CalcCheck: Found (11.13b) â€œSet inclusionâ€, (11.13) â€œSet inclusionâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ a âˆˆ ğ” â‡’ a âˆˆ Dom R )
        â‰¡ âŸ¨ â€œUniversal setâ€, â€œLeft-identity of â‡’â€ âŸ©
                â€” CalcCheck: Found â€œUniversal setâ€, â€œUniversal setâ€
                â€” CalcCheck: Found (3.73) â€œLeft-identity of â‡’â€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ a âˆˆ Dom R )
        â‰¡ âŸ¨ â€œMembership in `Dom`â€ âŸ©
                â€” CalcCheck: Found â€œMembership in `Dom`â€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆƒ b â€¢ a â¦— R â¦˜ b ) )
        â‰¡ âŸ¨ â€œTotalityâ€ âŸ©
                â€” CalcCheck: Found â€œTotalityâ€
                â€” CalcCheck: â”€ OK
            total R    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[19]
Another variant of this is frequently perceived as â€œnicerâ€:

[20]
Theorem â€œDomain of total relationsâ€:
    total R  â‰¡  Dom R = ğ”
Proof:
    Dom R = ğ”
  â‰¡âŸ¨ â€œSet extensionalityâ€âŸ©
    âˆ€ x â€¢ x âˆˆ Dom R â‰¡ x âˆˆ ğ”
  â‰¡âŸ¨ â€œUniversal setâ€âŸ©
    âˆ€ x â€¢ x âˆˆ Dom R â‰¡ true
  â‰¡âŸ¨ â€œIdentity of â‰¡â€âŸ© 
    âˆ€ x â€¢ x âˆˆ Dom R
  â‰¡âŸ¨ â€œMembership in `Dom`â€, â€œTotalityâ€âŸ©
    total R 
        
     
        
    

Theorem â€œDomain of total relationsâ€: total R â‰¡ Dom R = ğ”
Proof:
    Calculation for expected goal  `total R â‰¡ Dom R = ğ”`:
            Dom R = ğ”
        â‰¡ âŸ¨ â€œSet extensionalityâ€ âŸ©
                â€” CalcCheck: Found (11.4) â€œSet extensionalityâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ x â€¢ x âˆˆ Dom R â‰¡ x âˆˆ ğ” )
        â‰¡ âŸ¨ â€œUniversal setâ€ âŸ©
                â€” CalcCheck: Found â€œUniversal setâ€, â€œUniversal setâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ x â€¢ x âˆˆ Dom R â‰¡ true )
        â‰¡ âŸ¨ â€œIdentity of â‰¡â€ âŸ©
                â€” CalcCheck: Found (3.3) â€œIdentity of â‰¡â€
                â€” CalcCheck: â”€ OK
            (âˆ€ x â€¢ x âˆˆ Dom R )
        â‰¡ âŸ¨ â€œMembership in `Dom`â€, â€œTotalityâ€ âŸ©
                â€” CalcCheck: Found â€œMembership in `Dom`â€
                â€” CalcCheck: Found â€œTotalityâ€
                â€” CalcCheck: â”€ OK
            total R    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[21]
Injectivity
[22]
Declaration: injective : A â†” B  â†’  ğ”¹

Declaration: injective : A â†” B â†’ ğ”¹
[23]
Axiom â€œDefinition of injectivityâ€:
    injective R    â‰¡   R â¨¾ R Ë˜  âŠ†  ğ•€

Axiom â€œDefinition of injectivityâ€: injective R â‰¡ R â¨¾ R Ë˜ âŠ† ğ•€
[24]
Injectivity is dual (with respect to the direction of composition) to univalence, so the dualisation operator â€œ_Ë˜â€ (converse) converts between the two:

[25]
Theorem â€œInjectivity of converseâ€:
    injective (R Ë˜)  â‰¡  univalent R
Proof:
    injective (R Ë˜)
  â‰¡âŸ¨ â€œDefinition of injectivityâ€âŸ©
    R Ë˜ â¨¾ R Ë˜ Ë˜  âŠ†  ğ•€
  â‰¡âŸ¨ â€œSelf-inverse of Ë˜â€âŸ©
    R Ë˜ â¨¾ R âŠ† ğ•€
  â‰¡âŸ¨ â€œDefinition of univalenceâ€ âŸ©
    univalent R

Theorem â€œInjectivity of converseâ€: injective (R Ë˜) â‰¡ univalent R
Proof:
    Calculation for expected goal  `injective (R Ë˜) â‰¡ univalent R`:
            injective (R Ë˜)
        â‰¡ âŸ¨ â€œDefinition of injectivityâ€ âŸ©
                â€” CalcCheck: Found â€œDefinition of injectivityâ€
                â€” CalcCheck: â”€ OK
            R Ë˜ â¨¾ (R Ë˜) Ë˜ âŠ† ğ•€
        â‰¡ âŸ¨ â€œSelf-inverse of Ë˜â€ âŸ©
                â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                â€” CalcCheck: â”€ OK
            R Ë˜ â¨¾ R âŠ† ğ•€
        â‰¡ âŸ¨ â€œDefinition of univalenceâ€ âŸ©
                â€” CalcCheck: Found â€œDefinition of univalenceâ€
                â€” CalcCheck: â”€ OK
            univalent R    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[26]
Theorem â€œUnivalence of converseâ€:
    univalent (R Ë˜)  â‰¡  injective R
Proof:
    univalent (R Ë˜)
  â‰¡âŸ¨ â€œDefinition of univalenceâ€âŸ©
    R Ë˜ Ë˜ â¨¾ R Ë˜ âŠ† ğ•€
  â‰¡âŸ¨ â€œSelf-inverse of Ë˜â€âŸ©
    R â¨¾ R Ë˜ âŠ† ğ•€
  â‰¡âŸ¨ â€œDefinition of injectivityâ€âŸ©
    injective R   

Theorem â€œUnivalence of converseâ€: univalent (R Ë˜) â‰¡ injective R
Proof:
    Calculation for expected goal  `univalent (R Ë˜) â‰¡ injective R`:
            univalent (R Ë˜)
        â‰¡ âŸ¨ â€œDefinition of univalenceâ€ âŸ©
                â€” CalcCheck: Found â€œDefinition of univalenceâ€
                â€” CalcCheck: â”€ OK
            (R Ë˜) Ë˜ â¨¾ R Ë˜ âŠ† ğ•€
        â‰¡ âŸ¨ â€œSelf-inverse of Ë˜â€ âŸ©
                â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                â€” CalcCheck: â”€ OK
            R â¨¾ R Ë˜ âŠ† ğ•€
        â‰¡ âŸ¨ â€œDefinition of injectivityâ€ âŸ©
                â€” CalcCheck: Found â€œDefinition of injectivityâ€
                â€” CalcCheck: â”€ OK
            injective R    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[27]
One way to prove the predicate-logic formulation of injectivity is to use â€œUnivalence of converseâ€ to reduce the amount of predicate-logic reasoning required to a minimum:

[28]
Theorem â€œInjectivityâ€:
       injective R
    â‰¡  âˆ€ aâ‚ â€¢ âˆ€ aâ‚‚ â€¢ âˆ€ b â€¢ aâ‚ â¦— R â¦˜ b âˆ§ aâ‚‚ â¦— R â¦˜ b â‡’ aâ‚ = aâ‚‚
Proof:
    injective R
  â‰¡âŸ¨ â€œUnivalence of converseâ€âŸ©
    univalent (R Ë˜)
  â‰¡âŸ¨ â€œUnivalenceâ€âŸ©
    (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ (âˆ€ a â€¢ a â¦— R Ë˜ â¦˜ bâ‚ âˆ§ a â¦— R Ë˜ â¦˜ bâ‚‚ â‡’ bâ‚ = bâ‚‚ ))) 
  â‰¡âŸ¨ â€œRelation converseâ€âŸ©
    âˆ€ aâ‚ â€¢ âˆ€ aâ‚‚ â€¢ âˆ€ b â€¢ aâ‚ â¦— R â¦˜ b âˆ§ aâ‚‚ â¦— R â¦˜ b â‡’ aâ‚ = aâ‚‚

Theorem â€œInjectivityâ€: injective R â‰¡ (âˆ€ aâ‚ â€¢ (âˆ€ aâ‚‚ â€¢ (âˆ€ b â€¢ aâ‚ â¦— R â¦˜ b âˆ§ aâ‚‚ â¦— R â¦˜ b â‡’ aâ‚ = aâ‚‚ ) ) )   
    â€” CalcCheck: Proviso: Â¬occurs(`aâ‚, aâ‚‚, b`, `R`)
Proof:
    Calculation for expected goal  `injective R â‰¡ (âˆ€ aâ‚ â€¢ (âˆ€ aâ‚‚ â€¢ (âˆ€ b â€¢ aâ‚ â¦— R â¦˜ b âˆ§ aâ‚‚ â¦— R â¦˜ b â‡’ aâ‚ = aâ‚‚ ) ) )`:
            injective R
        â‰¡ âŸ¨ â€œUnivalence of converseâ€ âŸ©
                â€” CalcCheck: Found â€œUnivalence of converseâ€
                â€” CalcCheck: â”€ OK
            univalent (R Ë˜)
        â‰¡ âŸ¨ â€œUnivalenceâ€ âŸ©
                â€” CalcCheck: Found â€œUnivalenceâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ bâ‚ â€¢ (âˆ€ bâ‚‚ â€¢ (âˆ€ a â€¢ a â¦— R Ë˜ â¦˜ bâ‚ âˆ§ a â¦— R Ë˜ â¦˜ bâ‚‚ â‡’ bâ‚ = bâ‚‚ ) ) )
        â‰¡ âŸ¨ â€œRelation converseâ€ âŸ©
                â€” CalcCheck: Found â€œRelation converseâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ aâ‚ â€¢ (âˆ€ aâ‚‚ â€¢ (âˆ€ b â€¢ aâ‚ â¦— R â¦˜ b âˆ§ aâ‚‚ â¦— R â¦˜ b â‡’ aâ‚ = aâ‚‚ ) ) )    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[29]
Surjectivity
[30]
We define the surjectivity predicate for relations using the relation-algebraic formulation:

[31]
Declaration: surjective : A â†” B  â†’  ğ”¹

Declaration: surjective : A â†” B â†’ ğ”¹
[32]
Axiom â€œDefinition of surjectivityâ€:
    surjective R    â‰¡   ğ•€  âŠ†  R Ë˜ â¨¾ R

Axiom â€œDefinition of surjectivityâ€: surjective R â‰¡ ğ•€ âŠ† R Ë˜ â¨¾ R
[33]
Surjectivity is dual to totality:

[34]
Theorem â€œTotality of converseâ€:
    total (R Ë˜)  â‰¡  surjective R
Proof:
    total (R Ë˜)
  â‰¡âŸ¨ â€œDefinition of totalityâ€ âŸ©
    ğ•€ âŠ† R Ë˜ â¨¾ R Ë˜ Ë˜
  â‰¡âŸ¨ â€œSelf-inverse of Ë˜â€âŸ©
    ğ•€ âŠ† R Ë˜ â¨¾ R
  â‰¡âŸ¨ â€œDefinition of surjectivityâ€ âŸ©
    surjective R

Theorem â€œTotality of converseâ€: total (R Ë˜) â‰¡ surjective R
Proof:
    Calculation for expected goal  `total (R Ë˜) â‰¡ surjective R`:
            total (R Ë˜)
        â‰¡ âŸ¨ â€œDefinition of totalityâ€ âŸ©
                â€” CalcCheck: Found â€œDefinition of totalityâ€
                â€” CalcCheck: â”€ OK
            ğ•€ âŠ† R Ë˜ â¨¾ (R Ë˜) Ë˜
        â‰¡ âŸ¨ â€œSelf-inverse of Ë˜â€ âŸ©
                â€” CalcCheck: Found â€œSelf-inverse of Ë˜â€
                â€” CalcCheck: â”€ OK
            ğ•€ âŠ† R Ë˜ â¨¾ R
        â‰¡ âŸ¨ â€œDefinition of surjectivityâ€ âŸ©
                â€” CalcCheck: Found â€œDefinition of surjectivityâ€
                â€” CalcCheck: â”€ OK
            surjective R    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK
[35]
Theorem â€œSurjectivityâ€, relating the above relation-algebraic formulation of totality with the predicate-logic formulation, can now be shown in different waysâ€¦

[36]
Theorem â€œSurjectivityâ€:
    surjective R  â‰¡  (âˆ€ b â€¢ (âˆƒ a â€¢ a â¦— R â¦˜ b))
Proof:
    surjective R
  â‰¡âŸ¨ â€œTotality of converseâ€âŸ©
    total (R Ë˜)
  â‰¡âŸ¨ â€œTotalityâ€âŸ©
    (âˆ€ a â€¢ (âˆƒ b â€¢ a â¦— R Ë˜ â¦˜ b))  
  â‰¡âŸ¨ â€œRelation converseâ€âŸ©
    (âˆ€ a â€¢ (âˆƒ b â€¢ b â¦— R â¦˜ a))

Theorem â€œSurjectivityâ€: surjective R â‰¡ (âˆ€ b â€¢ (âˆƒ a â€¢ a â¦— R â¦˜ b ) )   
    â€” CalcCheck: Proviso: Â¬occurs(`a, b`, `R`)
Proof:
    Calculation for expected goal  `surjective R â‰¡ (âˆ€ b â€¢ (âˆƒ a â€¢ a â¦— R â¦˜ b ) )`:
            surjective R
        â‰¡ âŸ¨ â€œTotality of converseâ€ âŸ©
                â€” CalcCheck: Found â€œTotality of converseâ€
                â€” CalcCheck: â”€ OK
            total (R Ë˜)
        â‰¡ âŸ¨ â€œTotalityâ€ âŸ©
                â€” CalcCheck: Found â€œTotalityâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆƒ b â€¢ a â¦— R Ë˜ â¦˜ b ) )
        â‰¡ âŸ¨ â€œRelation converseâ€ âŸ©
                â€” CalcCheck: Found â€œRelation converseâ€
                â€” CalcCheck: â”€ OK
            (âˆ€ a â€¢ (âˆƒ b â€¢ b â¦— R â¦˜ a ) )    
    â€” CalcCheck: All steps OK   
    â€” CalcCheck: Calculation matches goal â”€ OK